<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="opening.css" />
    <script type="module">
        import { auth, app } from "./auth.js";
        import {
            getAuth,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

        const checkAuthState = async () => {
            onAuthStateChanged(auth, user => {
                if (user) {
                    // login_container.style.display = 'none';
                    // window.location.href = "category.html";
                    // // secretContent.style.display = 'block';
                }
                else {
                    window.location.href = "index.html";
                }
            })
        }

        checkAuthState();

        const userSignOut = async () => {
            await signOut(auth);
        }

        signOutButton.addEventListener('click', userSignOut);
    </script>
    <script src='https://cdn.plot.ly/plotly-2.27.0.min.js'></script>
</head>

<body>
    
    <div class="opening-page">
        
        <div class="div">
            
            <div class="frame">
                <img class="image" src="img/image-2.png" />
                <p class="text-wrapper">IN ASSOCIATION WITH CLIMATE NEUTRAL</p>
            </div>
            <div class="group">
                <div class="overlap">
                    <div class="overlap-group-wrapper">
                        <a href="category.html">
                            <div class="overlap-group">
                                <a href="#" class="btn-model-click" onclick="modalWindowOpen(this)">New</a>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="group-2">
                        <a href="#">
                            <div class="div-wrapper">
                                <div class="text-wrapper-3">Open</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close" onclick="closeWindowOpen(this)">&times;</span>
            <div class="firstModalPage" id="firstModalPage">
                <h1>Input Categories</h1>
                <table>
                    <tr>
                        <th>Category Name</th>
                        <th>Scoring Type</th>
                        <th>Weight</th>
                        <th>Direction to Optimize</th>
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td><input type="text" name="category_name[]"></td>
                        <td>
                            <select name="scoring_type[]">
                                <option value="number">Number</option>
                                <option value="descriptive">Descriptive</option>
                            </select>
                        </td>
                        <td>
                            <input type="number" step="0.01" name="weight[]" placeholder="Remaining: 1.00" oninput="updateRemainingWeight(this)">
                            <span class="error-message" style="font-size: 10px;"></span>
                            
                        </td>
                        <td>
                            <select name="direction_to_optimize[]">
                                <option value="up">Up</option>
                                <option value="down">Down</option>
                            </select>
                        </td>
                        <td>
                            <span class="delete-icon" onclick="deleteRow(this)">üóëÔ∏è</span>
                            <span class="clear-icon" onclick="clearRow(this)">üîÑ</span>
                        </td>
                    </tr>
                </table>
                <div class="add-button">
                    <button onclick="addCategoryRow()">Add Category</button>
                </div>

                <h1>Input Scenarios</h1>
                <table>
                    <tr>
                        <th>Scenario Name</th>
                        <!-- <th>Scenario Value</th> -->
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td><input type="text" name="scenario_name[]"></td>
                        <!-- <td><input type="number" step="0.01" name="scenario_value[]"></td> -->
                        <td>
                            <span class="delete-icon" onclick="deleteRow(this)">üóëÔ∏è</span>
                            <span class="clear-icon" onclick="clearRow(this)">üîÑ</span>
                        </td>
                    </tr>
                </table>
                <div class="add-button">
                    <button onclick="addScenarioRow()">Add Scenario</button>
                </div>

                <div class="submit-button">
                    <button type="submit" onclick="valueTable()">Continue</button>
                </div>

                <div id="table-container"></div>

                <div class="submit-button">
                    <button id="temp-submit-button" type="submit" onclick="calculateScore()"
                        style="display: none;">Submit</button>
                </div>
            </div>
            <div class="secondModalPage" id="secondModalPage" style="display: none;">
                <div id='chart'><!-- Plotly chart will be drawn inside this DIV --></div>
                <button type="submit" onclick="backToFirstModalPage()">Back</button>
                <button type="submit">Save</button>
            </div>

        </div>

    </div>
    <script src="app.js"></script>
    <div id="signOut" style="padding: 5% 10%;">
        <button id="signOutButton" class="button-4">Sign Out</button>
    </div>
    <!-- <div style="padding: 10%;display: flex;justify-content: space-between; gap: 10%; padding: 10% 35%;">
        <button id="myBtn" onclick="modalWindowOpen(this)" class="button-4">New</button>
        <button class="button-4" onclick="openMe(this)">Open</button>
    </div> -->
    



</body>

</html>