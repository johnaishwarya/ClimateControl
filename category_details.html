<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="category_style.css">
    <script type="module">
        import { auth, app } from "./auth.js";
        import { 
            getAuth,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

        const checkAuthState = async () => {
            onAuthStateChanged(auth, user => {
                if (user) {
                    // login_container.style.display = 'none';
                    // window.location.href = "category.html";
                    // // secretContent.style display = 'block';
                } else {
                    window.location.href = "index.html";
                }
            });

            // Function to hide "New" and "Open" buttons
            const hideButtons = () => {
                const newButton = document.getElementById("new_button");
                const openButton = document.querySelector("open-button");

                if (newButton) {
                    newButton.style.display = "none";
                }
                if (openButton) {
                    openButton.style.display = "none";
                }
            };

            // Function to show "New" and "Open" buttons
            const showButtons = () => {
                const newButton = document.getElementById("new_button");
                const openButton = document.getElementById("open-button");

                if (newButton) {
                    newButton.style.display = "block";
                }
                if (openButton) {
                    openButton.style.display = "block";
                }
            };

            checkAuthState();

            const userSignOut = async () => {
                await signOut(auth);
            }

            signOutButton.addEventListener('click', userSignOut);

            // Event listener to hide buttons when modal opens
            myBtn.addEventListener('click', () => {
                hideButtons();
            });

            // Event listener to show buttons when modal closes
            closeWindowOpen.addEventListener('click', () => {
                showButtons();
            });
        }
    </script>

</head>
<body>
    <script src="app.js"></script>
    <div id="signOut" class="sign-out-button-container">
        <button id="signOutButton">Sign Out</button>
    </div>
    <div class="image-section">
        <img src="./img/frame-28.png" alt="Image" class="image" />
    </div>
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="close" onclick="closeWindowOpen(this)">&times;</span>
          <h1>Input Categories</h1>
            <table>
                <tr>
                    <th>Category Name</th>
                    <th>Scoring Type</th>
                    <th>Direction to Optimize</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td><input type="text" name="category_name[]"></td>
                    <td>
                        <select name="scoring_type[]">
                            <option value="number">Number</option>
                            <option value="descriptive">Descriptive</option>
                        </select>
                    </td>
                    <td>
                        <select name="direction_to_optimize[]">
                            <option value="up">Up</option>
                            <option value="down">Down</option>
                        </select>
                    </td>
                    <td>
                        <span class="delete-icon" onclick="deleteRow(this)">üóëÔ∏è</span>
                        <span class="clear-icon" onclick="clearRow(this)">üîÑ</span>
                    </td>
                </tr>
            </table>
            <div class="add-button">
                <button onclick="addCategoryRow()">Add Category</button>
            </div>
            
            <h1>Input Scenarios</h1>
            <table>
                <tr>
                    <th>Scenario Name</th>
                    <!-- <th>Scenario Value</th> -->
                    <th>Action</th>
                </tr>
                <tr>
                    <td><input type="text" name="scenario_name[]"></td>
                    <!-- <td><input type="number" step="0.01" name="scenario_value[]"></td> -->
                    <td>
                        <span class="delete-icon" onclick="deleteRow(this)">üóëÔ∏è</span>
                        <span class="clear-icon" onclick="clearRow(this)">üîÑ</span>
                    </td>
                </tr>
            </table>
            <div class="add-button">
                <button onclick="addScenarioRow()">Add Scenario</button>
            </div>

            <div class="submit-button">
                <button type="submit" onclick="valueTable()">Continue</button>
            </div>

            <div id="table-container"></div>
        </div>
      
    </div>
    <div style="padding: 5%;">
        <div class="button-container">
            <button id="new_button" class="action-button" onclick="modalWindowOpen(this)">New</button>
            <button id="open_button" class="action-button">Open</button>
        </div>
    </div>
    
    
    



    
</body>
</html>
